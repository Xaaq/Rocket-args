language: python
python:
  - 3.8
  - 3.7
  - 3.6
install:
  - pip install --upgrade tox-travis
script: tox
jobs:
  include:
    - name: docs
      install:
       - pip install poetry
       - poetry install
      script: poetry run mkdocs build
    - stage: Build and deploy
      if: tag IS present
      name: docs
      install:
      - pip install poetry
      - poetry install
      script: poetry run mkdocs build
      deploy:
        provider: pages:git
        edge: true
        token: $GITHUB_TOKEN
        cleanup: false
        keep_history: false
        local_dir: site
        on:
          tags: true

# Assuming you have installed the travis-ci CLI tool, after you
# create the Github repo and add it to Travis, run the
# following command to finish PyPI deployment setup:
# $ travis encrypt --add deploy.password
#deploy:
#  provider: pypi
#  distributions: sdist bdist_wheel
#  user: Xaaq
#  password:
#    secure: PLEASE_REPLACE_ME
#  on:
#    tags: true
#    repo: Xaaq/rocket_args
#    python: 3.8
